'use strict';
import Bluebird from 'bluebird';
import * as utils from './../utils';
export default function(Model, findOneCb) {
    let findOneHook = Bluebird.method((output, user) => findOneCb ? findOneCb(output, user) : output);
    return function(request, reply) {
        findOneHook(request.pre[Model.collection], utils.user(request))
            .then(reply)
            .catch((err) => {
                utils.logAndBoom(err, reply);
            });
    };
}
